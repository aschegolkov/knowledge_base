 
 
**Именно идея сохранения в маршрутной таблице только реально используемых виртуальных путей и легла в основу разработки протокола MPLS и сопряженных с ним протоколов маршрутизации.**

Протокол MPLS хорошо приспособлен для формирования виртуальных сетей (VPN) повышенного быстродействия (**метки коммутируются быстрее, чем маршрутизируются пакеты**). Принципиальной основой MPLS являются IP-туннели. Для его работы нужна поддержка протокола маршрутизации MP-BGP (RFC-2858). Протокол MPLS может работать практически для любого маршрутизируемого транспортного протокола (не только IP). При появлении пакета в виртуальной сети ему присваивается метка, которая не позволяет ему покинуть пределы данной виртуальной сети. Протокол MPLS предоставляет возможность обеспечения значения **QoS**, гарантирующего более высокую безопасность.  Для одного и того же набора узлов можно сформировать несколько разных виртуальных сетей (используя разные метки), **например, для разных видов QoS**. 

Cтек меток размещается между заголовками сетевого и канального уровней (L2 и L3)

![mpls label](./docs/img/mpls_label.jpg)


 Пример LDP LSP: 

```bash
                 LSP Information: LDP LSP
----------------------------------------------
FEC                In/Out Label    In/Out IF  
1.1.1.1/32   NULL/54846      -/Eth-Trunk2.2    # Метка in трафика  после per-hop behaviour (PHB)  UPLINK 1 
1.1.1.1/32   51122/54846     -/Eth-Trunk2.2    # Метка out трафика UPLINK 1            
1.1.1.1/32   NULL/6415       -/Eth-Trunk1.2    # Метка in трафика   после per-hop behaviour (PHB) UPLINK 2
1.1.1.1/32   51122/6415      -/Eth-Trunk1.2  # Метка out трафика UPLINK 2 
```